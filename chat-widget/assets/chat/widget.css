/* ==========================================================================
   Tony Chat Widget â€” full styles
   ========================================================================== */
:root {
  --cw-accent: #2f3a4f;
  --cw-radius: 18px;

  --cw-panel-bg: #ffffff;
  --cw-panel-fg: #0f1522;
  --cw-panel-border: #d9dde3;

  --cw-bot-bg: #2f3a4f;
  --cw-bot-fg: #ffffff;
  --cw-bot-border: #263149;

  --cw-user-bg: #e0e0e0;
  --cw-user-fg: #000000;
  --cw-user-border: #c9ccd2;

  --cw-input-bg: #e0e0e0;
  --cw-input-fg: #000000;
  --cw-input-placeholder: rgba(0, 0, 0, 0.6);
  --cw-input-border: #cfd6df;

  --cw-scroll-bg: #ffffff;
  --cw-msg-border: #d6dbe3;

  --cw-shadow: 0 18px 40px rgba(0,0,0,0.18);
  --cw-z-panel: 2147483002;
  --cw-z-launch: 2147483001;
}

/* Dark mode */
@media (prefers-color-scheme: dark) {
  :root {
    --cw-panel-bg: #0d1423;
    --cw-panel-fg: #e8ecf7;
    --cw-panel-border: #233150;

    --cw-bot-bg: #334661;
    --cw-bot-fg: #ffffff;
    --cw-bot-border: #22324c;

    --cw-user-bg: #3b4250;
    --cw-user-fg: #f1f4fb;
    --cw-user-border: #56617a;

    --cw-input-bg: #3b4250;
    --cw-input-fg: #f1f4fb;
    --cw-input-placeholder: rgba(241,244,251,0.5);
    --cw-input-border: #56617a;

    --cw-scroll-bg: #0d1423;
    --cw-msg-border: #2a3955;
  }
}

/* Reduce motion */
@media (prefers-reduced-motion: reduce) {
  * { animation: none !important; transition: none !important; }
}

/* Print */
@media print {
  #cw-launcher, .cw-root { display: none !important; }
}

/* ===== Launcher button (fixed) ===== */
#cw-launcher {
  position: fixed;
  bottom: 24px;
  right: 24px;
  z-index: var(--cw-z-launch);
  width: 72px;                 /* enlarged */
  height: 72px;                /* enlarged */
  border-radius: 50%;
  background: transparent;
  border: none;
  padding: 0;
  cursor: pointer;
  -webkit-tap-highlight-color: transparent;
  overflow: visible;
}

#cw-launcher .cw-avatar-wrap{
  position: relative;
  width: 72px; height: 72px;
  border-radius: 50%;
  overflow: hidden;            /* clips anything underneath */
  background: #fff;
  box-shadow: 0 10px 26px rgba(0,0,0,0.24);
  z-index: 2;                  /* above any old bubble */
}

#cw-launcher img,
#cw-avatar{
  width: 100%; height: 100%;
  object-fit: cover; display: block;
  border-radius: 50%;
}

/* Badge snug against avatar rim (gap closed) */
#cw-launcher .cw-launcher-badge{
  position: absolute;
  right: -4px;                 /* tighter to edge */
  top: -2px;                   /* lowered to touch avatar */
  min-width: 20px;
  height: 20px;
  padding: 3px 7px;
  border-radius: 999px;
  background: var(--cw-accent);
  color: #fff;
  font-size: 12px;
  line-height: 14px;
  display: inline-flex; align-items: center; justify-content: center;
  box-shadow: 0 2px 6px rgba(0,0,0,.25);
  border: 1px solid rgba(0,0,0,.1);
  z-index: 3;
  pointer-events: none;
}

/* Optional animated 3-dot style inside badge */
#cw-launcher .cw-launcher-badge i{
  width:4px; height:4px; border-radius:50%;
  background:#fff; opacity:.9; margin:0 2px;
  animation:cwBadgeBlink 1.2s infinite;
}
#cw-launcher .cw-launcher-badge i:nth-child(2){ animation-delay:.2s; }
#cw-launcher .cw-launcher-badge i:nth-child(3){ animation-delay:.4s; }
@keyframes cwBadgeBlink{ 0%,80%,100%{opacity:.35} 40%{opacity:1} }

/* Hide launcher when open */
.cw-open #cw-launcher { opacity: 0; pointer-events: none; }

/* ===== Panel ===== */
.cw-root {
  position: fixed;
  right: 16px;
  top: 96px;
  z-index: var(--cw-z-panel);
  width: 420px;
  max-width: calc(100vw - 32px);
  background: var(--cw-panel-bg);
  color: var(--cw-panel-fg);
  border: 1px solid var(--cw-panel-border);
  border-radius: var(--cw-radius);
  box-shadow: var(--cw-shadow);
  display: none;
  overflow: hidden;
  font-family: system-ui, -apple-system, Segoe UI, Roboto, sans-serif;
}

.cw-header {
  display:flex; align-items:center; justify-content:space-between; gap:12px;
  padding:14px 16px; background: var(--cw-accent); color:#fff;
}
.cw-head { display:flex; flex-direction:column; gap:4px; }
.cw-title { font-weight:800; font-size:16px; letter-spacing:.2px; }
.cw-subtitle { opacity:.9; font-size:12px; }
.cw-close { background:transparent; border:none; font-size:24px; color:#fff; cursor:pointer; }
.cw-close:focus-visible { outline:2px solid #fff; outline-offset:2px; }

/* Scroll area */
.cw-messages {
  background: var(--cw-scroll-bg);
  padding: 16px;
  height: 360px;
  max-height: 60vh;
  overflow-y: auto; overflow-x: hidden;
  scroll-behavior: smooth;
}
.cw-messages::-webkit-scrollbar{ width:8px; }
.cw-messages::-webkit-scrollbar-thumb{ background:#c1c7d4; border-radius:4px; }
.cw-messages::-webkit-scrollbar-track{ background:#f1f3f7; }

/* Rows */
.cw-row{ display:flex; margin:8px 0; }
.cw-row-user{ justify-content:flex-end; }
.cw-row-assistant{ justify-content:flex-start; }

/* Bubbles */
.cw-bubble{
  max-width:85%;
  border-radius:20px;
  padding:12px 14px;
  white-space:pre-wrap;
  word-break:break-word;
  border:1px solid var(--cw-msg-border);
  line-height:1.5; font-size:14px;
}
.cw-bubble p{ margin:6px 0; }
.cw-bubble ul, .cw-bubble ol{ margin:6px 0 4px 0; padding-left:18px; }
.cw-bubble li{ margin:4px 0; }
.cw-bubble code{
  background:rgba(0,0,0,0.06);
  border-radius:4px; padding:0 4px;
  font-family:Consolas, Monaco, monospace; font-size:13px;
}
.cw-bubble pre{
  background:rgba(0,0,0,0.06);
  border-radius:6px; padding:10px; overflow-x:auto;
}
.cw-bubble pre code{ background:transparent; padding:0; font-size:13px; }

/* Assistant bubble: navy with white */
.cw-bubble-assistant{
  background: var(--cw-bot-bg);
  color: var(--cw-bot-fg);
  border-color: var(--cw-bot-border);
  border-top-left-radius:10px;
}
/* User bubble: light gray with black */
.cw-bubble-user{
  background: var(--cw-user-bg);
  color: var(--cw-user-fg);
  border-color: var(--cw-user-border);
  border-top-right-radius:10px;
}

/* Trailing-question emphasis */
.cw-bubble-assistant .cw-callout{
  display:block;
  margin-top:8px;
  font-style:italic;
  opacity:.9;
}

/* Typing */
.cw-typing .cw-bubble{ display:flex; align-items:center; }
.cw-dots{ display:inline-flex; gap:6px; }
.cw-dots i{
  width:6px; height:6px; border-radius:50%;
  background:#c1c7d4; display:block; animation:cwblink 1s infinite;
}
.cw-dots i:nth-child(2){ animation-delay:.2s; }
.cw-dots i:nth-child(3){ animation-delay:.4s; }
@keyframes cwblink{ 0%,80%,100%{opacity:.3} 40%{opacity:1} }

/* Input row */
.cw-form{
  display:flex; align-items:center; gap:10px;
  background:#fff; border-top:1px solid #d6dbe3; padding:12px;
}
.cw-input{
  flex:1; resize:none;
  border:1px solid var(--cw-input-border);
  border-radius:16px;
  background: var(--cw-input-bg);
  color: var(--cw-input-fg);
  padding:12px 48px 12px 14px;
  max-height:140px; font-size:15px; line-height:1.4; outline:none;
}
.cw-input::placeholder{ color: var(--cw-input-placeholder); }
c .cw-input:focus{ outline:2px solid rgba(47,58,79,0.3); outline-offset:1px; }

.cw-send{
  inline-size:46px; block-size:46px;
  border-radius:50%; border:none; cursor:pointer;
  background: var(--cw-accent); color:#fff;
  display:grid; place-items:center;
  transition: transform .1s ease, filter .1s ease;
}
.cw-send:hover{ transform: translateY(-1px); filter: brightness(1.05); }
.cw-send:active{ transform: translateY(0); }
.cw-send:focus-visible{ outline:2px solid #fff; outline-offset:2px; }
.cw-send:disabled{ opacity:.6; cursor:not-allowed; }
.cw-send svg{ width:20px; height:20px; fill:#fff; display:block; }

/* Responsive */
@media (max-width: 520px) {
  .cw-root { right: 12px; left: 12px; width: auto; }
}

/* Minimal duplicate-badge suppression */
#cw-bubble{ display:none !important; }  /* hide legacy bubble */
